/* automatically generated by JSCoverage - do not edit */
if (typeof _$jscoverage === 'undefined') _$jscoverage = {};
if (! _$jscoverage['google-event-loader.js']) {
  _$jscoverage['google-event-loader.js'] = [];
  _$jscoverage['google-event-loader.js'][1] = 0;
  _$jscoverage['google-event-loader.js'][2] = 0;
  _$jscoverage['google-event-loader.js'][3] = 0;
  _$jscoverage['google-event-loader.js'][4] = 0;
  _$jscoverage['google-event-loader.js'][5] = 0;
  _$jscoverage['google-event-loader.js'][6] = 0;
  _$jscoverage['google-event-loader.js'][7] = 0;
  _$jscoverage['google-event-loader.js'][8] = 0;
  _$jscoverage['google-event-loader.js'][9] = 0;
  _$jscoverage['google-event-loader.js'][11] = 0;
  _$jscoverage['google-event-loader.js'][12] = 0;
  _$jscoverage['google-event-loader.js'][13] = 0;
  _$jscoverage['google-event-loader.js'][14] = 0;
  _$jscoverage['google-event-loader.js'][15] = 0;
  _$jscoverage['google-event-loader.js'][16] = 0;
  _$jscoverage['google-event-loader.js'][17] = 0;
  _$jscoverage['google-event-loader.js'][18] = 0;
  _$jscoverage['google-event-loader.js'][19] = 0;
  _$jscoverage['google-event-loader.js'][20] = 0;
  _$jscoverage['google-event-loader.js'][21] = 0;
  _$jscoverage['google-event-loader.js'][22] = 0;
  _$jscoverage['google-event-loader.js'][24] = 0;
  _$jscoverage['google-event-loader.js'][26] = 0;
  _$jscoverage['google-event-loader.js'][27] = 0;
  _$jscoverage['google-event-loader.js'][30] = 0;
  _$jscoverage['google-event-loader.js'][31] = 0;
  _$jscoverage['google-event-loader.js'][32] = 0;
  _$jscoverage['google-event-loader.js'][34] = 0;
  _$jscoverage['google-event-loader.js'][35] = 0;
  _$jscoverage['google-event-loader.js'][39] = 0;
  _$jscoverage['google-event-loader.js'][40] = 0;
  _$jscoverage['google-event-loader.js'][41] = 0;
  _$jscoverage['google-event-loader.js'][42] = 0;
  _$jscoverage['google-event-loader.js'][44] = 0;
  _$jscoverage['google-event-loader.js'][45] = 0;
  _$jscoverage['google-event-loader.js'][46] = 0;
  _$jscoverage['google-event-loader.js'][47] = 0;
  _$jscoverage['google-event-loader.js'][48] = 0;
  _$jscoverage['google-event-loader.js'][49] = 0;
  _$jscoverage['google-event-loader.js'][51] = 0;
  _$jscoverage['google-event-loader.js'][52] = 0;
  _$jscoverage['google-event-loader.js'][53] = 0;
  _$jscoverage['google-event-loader.js'][58] = 0;
  _$jscoverage['google-event-loader.js'][59] = 0;
  _$jscoverage['google-event-loader.js'][60] = 0;
  _$jscoverage['google-event-loader.js'][62] = 0;
  _$jscoverage['google-event-loader.js'][63] = 0;
  _$jscoverage['google-event-loader.js'][64] = 0;
  _$jscoverage['google-event-loader.js'][65] = 0;
  _$jscoverage['google-event-loader.js'][66] = 0;
  _$jscoverage['google-event-loader.js'][67] = 0;
  _$jscoverage['google-event-loader.js'][68] = 0;
  _$jscoverage['google-event-loader.js'][69] = 0;
  _$jscoverage['google-event-loader.js'][70] = 0;
  _$jscoverage['google-event-loader.js'][71] = 0;
  _$jscoverage['google-event-loader.js'][72] = 0;
  _$jscoverage['google-event-loader.js'][73] = 0;
  _$jscoverage['google-event-loader.js'][76] = 0;
  _$jscoverage['google-event-loader.js'][77] = 0;
  _$jscoverage['google-event-loader.js'][80] = 0;
  _$jscoverage['google-event-loader.js'][81] = 0;
  _$jscoverage['google-event-loader.js'][82] = 0;
  _$jscoverage['google-event-loader.js'][83] = 0;
  _$jscoverage['google-event-loader.js'][84] = 0;
  _$jscoverage['google-event-loader.js'][85] = 0;
  _$jscoverage['google-event-loader.js'][86] = 0;
  _$jscoverage['google-event-loader.js'][87] = 0;
  _$jscoverage['google-event-loader.js'][90] = 0;
  _$jscoverage['google-event-loader.js'][91] = 0;
  _$jscoverage['google-event-loader.js'][96] = 0;
  _$jscoverage['google-event-loader.js'][99] = 0;
  _$jscoverage['google-event-loader.js'][100] = 0;
  _$jscoverage['google-event-loader.js'][102] = 0;
  _$jscoverage['google-event-loader.js'][103] = 0;
  _$jscoverage['google-event-loader.js'][105] = 0;
  _$jscoverage['google-event-loader.js'][106] = 0;
  _$jscoverage['google-event-loader.js'][107] = 0;
  _$jscoverage['google-event-loader.js'][108] = 0;
  _$jscoverage['google-event-loader.js'][110] = 0;
  _$jscoverage['google-event-loader.js'][111] = 0;
  _$jscoverage['google-event-loader.js'][112] = 0;
  _$jscoverage['google-event-loader.js'][113] = 0;
  _$jscoverage['google-event-loader.js'][120] = 0;
  _$jscoverage['google-event-loader.js'][121] = 0;
  _$jscoverage['google-event-loader.js'][122] = 0;
  _$jscoverage['google-event-loader.js'][123] = 0;
  _$jscoverage['google-event-loader.js'][124] = 0;
  _$jscoverage['google-event-loader.js'][125] = 0;
  _$jscoverage['google-event-loader.js'][126] = 0;
  _$jscoverage['google-event-loader.js'][127] = 0;
  _$jscoverage['google-event-loader.js'][128] = 0;
  _$jscoverage['google-event-loader.js'][130] = 0;
  _$jscoverage['google-event-loader.js'][134] = 0;
  _$jscoverage['google-event-loader.js'][136] = 0;
  _$jscoverage['google-event-loader.js'][137] = 0;
  _$jscoverage['google-event-loader.js'][138] = 0;
  _$jscoverage['google-event-loader.js'][140] = 0;
  _$jscoverage['google-event-loader.js'][141] = 0;
  _$jscoverage['google-event-loader.js'][142] = 0;
  _$jscoverage['google-event-loader.js'][143] = 0;
  _$jscoverage['google-event-loader.js'][144] = 0;
  _$jscoverage['google-event-loader.js'][145] = 0;
  _$jscoverage['google-event-loader.js'][146] = 0;
  _$jscoverage['google-event-loader.js'][147] = 0;
  _$jscoverage['google-event-loader.js'][148] = 0;
  _$jscoverage['google-event-loader.js'][150] = 0;
  _$jscoverage['google-event-loader.js'][152] = 0;
  _$jscoverage['google-event-loader.js'][153] = 0;
  _$jscoverage['google-event-loader.js'][154] = 0;
  _$jscoverage['google-event-loader.js'][155] = 0;
  _$jscoverage['google-event-loader.js'][156] = 0;
  _$jscoverage['google-event-loader.js'][157] = 0;
  _$jscoverage['google-event-loader.js'][158] = 0;
  _$jscoverage['google-event-loader.js'][159] = 0;
  _$jscoverage['google-event-loader.js'][160] = 0;
  _$jscoverage['google-event-loader.js'][161] = 0;
  _$jscoverage['google-event-loader.js'][162] = 0;
  _$jscoverage['google-event-loader.js'][163] = 0;
  _$jscoverage['google-event-loader.js'][164] = 0;
  _$jscoverage['google-event-loader.js'][167] = 0;
  _$jscoverage['google-event-loader.js'][169] = 0;
  _$jscoverage['google-event-loader.js'][170] = 0;
  _$jscoverage['google-event-loader.js'][173] = 0;
  _$jscoverage['google-event-loader.js'][174] = 0;
  _$jscoverage['google-event-loader.js'][175] = 0;
  _$jscoverage['google-event-loader.js'][176] = 0;
  _$jscoverage['google-event-loader.js'][177] = 0;
  _$jscoverage['google-event-loader.js'][178] = 0;
  _$jscoverage['google-event-loader.js'][179] = 0;
  _$jscoverage['google-event-loader.js'][180] = 0;
  _$jscoverage['google-event-loader.js'][181] = 0;
  _$jscoverage['google-event-loader.js'][182] = 0;
  _$jscoverage['google-event-loader.js'][183] = 0;
  _$jscoverage['google-event-loader.js'][185] = 0;
  _$jscoverage['google-event-loader.js'][186] = 0;
  _$jscoverage['google-event-loader.js'][187] = 0;
  _$jscoverage['google-event-loader.js'][188] = 0;
  _$jscoverage['google-event-loader.js'][189] = 0;
  _$jscoverage['google-event-loader.js'][190] = 0;
  _$jscoverage['google-event-loader.js'][191] = 0;
  _$jscoverage['google-event-loader.js'][192] = 0;
  _$jscoverage['google-event-loader.js'][193] = 0;
  _$jscoverage['google-event-loader.js'][194] = 0;
  _$jscoverage['google-event-loader.js'][195] = 0;
  _$jscoverage['google-event-loader.js'][197] = 0;
  _$jscoverage['google-event-loader.js'][198] = 0;
  _$jscoverage['google-event-loader.js'][199] = 0;
  _$jscoverage['google-event-loader.js'][201] = 0;
  _$jscoverage['google-event-loader.js'][202] = 0;
  _$jscoverage['google-event-loader.js'][203] = 0;
  _$jscoverage['google-event-loader.js'][213] = 0;
  _$jscoverage['google-event-loader.js'][214] = 0;
  _$jscoverage['google-event-loader.js'][215] = 0;
  _$jscoverage['google-event-loader.js'][216] = 0;
  _$jscoverage['google-event-loader.js'][217] = 0;
  _$jscoverage['google-event-loader.js'][218] = 0;
  _$jscoverage['google-event-loader.js'][219] = 0;
  _$jscoverage['google-event-loader.js'][220] = 0;
  _$jscoverage['google-event-loader.js'][221] = 0;
  _$jscoverage['google-event-loader.js'][222] = 0;
  _$jscoverage['google-event-loader.js'][223] = 0;
  _$jscoverage['google-event-loader.js'][224] = 0;
  _$jscoverage['google-event-loader.js'][225] = 0;
  _$jscoverage['google-event-loader.js'][227] = 0;
  _$jscoverage['google-event-loader.js'][230] = 0;
  _$jscoverage['google-event-loader.js'][231] = 0;
  _$jscoverage['google-event-loader.js'][234] = 0;
  _$jscoverage['google-event-loader.js'][235] = 0;
  _$jscoverage['google-event-loader.js'][238] = 0;
  _$jscoverage['google-event-loader.js'][239] = 0;
  _$jscoverage['google-event-loader.js'][240] = 0;
  _$jscoverage['google-event-loader.js'][241] = 0;
  _$jscoverage['google-event-loader.js'][243] = 0;
  _$jscoverage['google-event-loader.js'][244] = 0;
  _$jscoverage['google-event-loader.js'][245] = 0;
  _$jscoverage['google-event-loader.js'][246] = 0;
  _$jscoverage['google-event-loader.js'][248] = 0;
  _$jscoverage['google-event-loader.js'][249] = 0;
  _$jscoverage['google-event-loader.js'][252] = 0;
  _$jscoverage['google-event-loader.js'][253] = 0;
  _$jscoverage['google-event-loader.js'][255] = 0;
  _$jscoverage['google-event-loader.js'][256] = 0;
  _$jscoverage['google-event-loader.js'][260] = 0;
  _$jscoverage['google-event-loader.js'][261] = 0;
  _$jscoverage['google-event-loader.js'][264] = 0;
  _$jscoverage['google-event-loader.js'][266] = 0;
  _$jscoverage['google-event-loader.js'][267] = 0;
  _$jscoverage['google-event-loader.js'][268] = 0;
  _$jscoverage['google-event-loader.js'][269] = 0;
  _$jscoverage['google-event-loader.js'][270] = 0;
  _$jscoverage['google-event-loader.js'][271] = 0;
  _$jscoverage['google-event-loader.js'][273] = 0;
  _$jscoverage['google-event-loader.js'][274] = 0;
  _$jscoverage['google-event-loader.js'][275] = 0;
  _$jscoverage['google-event-loader.js'][287] = 0;
  _$jscoverage['google-event-loader.js'][288] = 0;
  _$jscoverage['google-event-loader.js'][289] = 0;
  _$jscoverage['google-event-loader.js'][290] = 0;
  _$jscoverage['google-event-loader.js'][291] = 0;
  _$jscoverage['google-event-loader.js'][293] = 0;
  _$jscoverage['google-event-loader.js'][294] = 0;
  _$jscoverage['google-event-loader.js'][297] = 0;
  _$jscoverage['google-event-loader.js'][298] = 0;
  _$jscoverage['google-event-loader.js'][300] = 0;
  _$jscoverage['google-event-loader.js'][301] = 0;
  _$jscoverage['google-event-loader.js'][305] = 0;
  _$jscoverage['google-event-loader.js'][306] = 0;
  _$jscoverage['google-event-loader.js'][307] = 0;
  _$jscoverage['google-event-loader.js'][308] = 0;
  _$jscoverage['google-event-loader.js'][309] = 0;
  _$jscoverage['google-event-loader.js'][310] = 0;
  _$jscoverage['google-event-loader.js'][312] = 0;
  _$jscoverage['google-event-loader.js'][313] = 0;
  _$jscoverage['google-event-loader.js'][316] = 0;
  _$jscoverage['google-event-loader.js'][317] = 0;
  _$jscoverage['google-event-loader.js'][319] = 0;
  _$jscoverage['google-event-loader.js'][320] = 0;
  _$jscoverage['google-event-loader.js'][324] = 0;
  _$jscoverage['google-event-loader.js'][325] = 0;
  _$jscoverage['google-event-loader.js'][326] = 0;
  _$jscoverage['google-event-loader.js'][327] = 0;
  _$jscoverage['google-event-loader.js'][328] = 0;
  _$jscoverage['google-event-loader.js'][329] = 0;
  _$jscoverage['google-event-loader.js'][330] = 0;
  _$jscoverage['google-event-loader.js'][331] = 0;
  _$jscoverage['google-event-loader.js'][332] = 0;
  _$jscoverage['google-event-loader.js'][333] = 0;
  _$jscoverage['google-event-loader.js'][334] = 0;
  _$jscoverage['google-event-loader.js'][335] = 0;
  _$jscoverage['google-event-loader.js'][336] = 0;
  _$jscoverage['google-event-loader.js'][338] = 0;
  _$jscoverage['google-event-loader.js'][339] = 0;
  _$jscoverage['google-event-loader.js'][342] = 0;
  _$jscoverage['google-event-loader.js'][343] = 0;
  _$jscoverage['google-event-loader.js'][345] = 0;
  _$jscoverage['google-event-loader.js'][346] = 0;
  _$jscoverage['google-event-loader.js'][350] = 0;
  _$jscoverage['google-event-loader.js'][351] = 0;
  _$jscoverage['google-event-loader.js'][354] = 0;
  _$jscoverage['google-event-loader.js'][355] = 0;
  _$jscoverage['google-event-loader.js'][357] = 0;
  _$jscoverage['google-event-loader.js'][358] = 0;
  _$jscoverage['google-event-loader.js'][362] = 0;
  _$jscoverage['google-event-loader.js'][363] = 0;
  _$jscoverage['google-event-loader.js'][365] = 0;
  _$jscoverage['google-event-loader.js'][366] = 0;
  _$jscoverage['google-event-loader.js'][367] = 0;
  _$jscoverage['google-event-loader.js'][368] = 0;
  _$jscoverage['google-event-loader.js'][369] = 0;
  _$jscoverage['google-event-loader.js'][370] = 0;
  _$jscoverage['google-event-loader.js'][372] = 0;
  _$jscoverage['google-event-loader.js'][373] = 0;
  _$jscoverage['google-event-loader.js'][374] = 0;
  _$jscoverage['google-event-loader.js'][375] = 0;
  _$jscoverage['google-event-loader.js'][376] = 0;
  _$jscoverage['google-event-loader.js'][377] = 0;
  _$jscoverage['google-event-loader.js'][380] = 0;
  _$jscoverage['google-event-loader.js'][382] = 0;
  _$jscoverage['google-event-loader.js'][383] = 0;
}
_$jscoverage['google-event-loader.js'][1]++;
(function () {
  _$jscoverage['google-event-loader.js'][2]++;
  MKT.GoogleEventLoader = (function (service, loading) {
  _$jscoverage['google-event-loader.js'][3]++;
  this.service = service;
  _$jscoverage['google-event-loader.js'][4]++;
  this.loading = loading;
  _$jscoverage['google-event-loader.js'][5]++;
  this.cache = {};
  _$jscoverage['google-event-loader.js'][6]++;
  this.addEventHook = (function () {
});
  _$jscoverage['google-event-loader.js'][7]++;
  this.updateEventHook = (function () {
});
  _$jscoverage['google-event-loader.js'][8]++;
  this.removeEventHook = (function () {
});
  _$jscoverage['google-event-loader.js'][9]++;
  return this;
});
  _$jscoverage['google-event-loader.js'][11]++;
  MKT.GoogleEventLoader.prototype.init = (function (successCallback, failureCallback) {
  _$jscoverage['google-event-loader.js'][12]++;
  this.loading.show();
  _$jscoverage['google-event-loader.js'][13]++;
  return this.service.getAllCalendarsFeed("http://www.google.com/calendar/feeds/default/allcalendars/full", (function (__this) {
  _$jscoverage['google-event-loader.js'][14]++;
  var __func = (function (result) {
  _$jscoverage['google-event-loader.js'][15]++;
  var _a, _b, _c, accessValue, calendar;
  _$jscoverage['google-event-loader.js'][16]++;
  this.loading.hide();
  _$jscoverage['google-event-loader.js'][17]++;
  this.calendars = result.feed.entry;
  _$jscoverage['google-event-loader.js'][18]++;
  _b = this.calendars;
  _$jscoverage['google-event-loader.js'][19]++;
  for (_a = 0, _c = _b.length; _a < _c; _a++) {
    _$jscoverage['google-event-loader.js'][20]++;
    calendar = _b[_a];
    _$jscoverage['google-event-loader.js'][21]++;
    accessValue = calendar.getAccessLevel().getValue();
    _$jscoverage['google-event-loader.js'][22]++;
    calendar.editable = accessValue === google.gdata.calendar.AccessLevelProperty.VALUE_OWNER || accessValue === google.gdata.calendar.AccessLevelProperty.VALUE_EDITOR;
}
  _$jscoverage['google-event-loader.js'][24]++;
  return successCallback();
});
  _$jscoverage['google-event-loader.js'][26]++;
  return (function () {
  _$jscoverage['google-event-loader.js'][27]++;
  return __func.apply(__this, arguments);
});
})(this), (function (__this) {
  _$jscoverage['google-event-loader.js'][30]++;
  var __func = (function () {
  _$jscoverage['google-event-loader.js'][31]++;
  this.loading.hide();
  _$jscoverage['google-event-loader.js'][32]++;
  return failureCallback();
});
  _$jscoverage['google-event-loader.js'][34]++;
  return (function () {
  _$jscoverage['google-event-loader.js'][35]++;
  return __func.apply(__this, arguments);
});
})(this));
});
  _$jscoverage['google-event-loader.js'][39]++;
  MKT.GoogleEventLoader.prototype.getFeedUriForCalendar = (function (calNumber) {
  _$jscoverage['google-event-loader.js'][40]++;
  var calendar;
  _$jscoverage['google-event-loader.js'][41]++;
  calendar = this.calendars[calNumber];
  _$jscoverage['google-event-loader.js'][42]++;
  return calendar.getLink().href;
});
  _$jscoverage['google-event-loader.js'][44]++;
  MKT.GoogleEventLoader.prototype.load = (function (startDate, endDate, successCallback, failureCallback) {
  _$jscoverage['google-event-loader.js'][45]++;
  var _a, _b, cacheEndDate, cacheStartDate;
  _$jscoverage['google-event-loader.js'][46]++;
  if (this.datesInCache(startDate, endDate)) {
    _$jscoverage['google-event-loader.js'][47]++;
    return successCallback(this.getCachedEvents(startDate, endDate), startDate, endDate);
  }
  else {
    _$jscoverage['google-event-loader.js'][48]++;
    if (this.isLoading(startDate, endDate)) {
      _$jscoverage['google-event-loader.js'][49]++;
      return this.addCallbacks(startDate, endDate, successCallback, failureCallback);
    }
    else {
      _$jscoverage['google-event-loader.js'][51]++;
      cacheStartDate = new Date(startDate.getFullYear(), 0, 1);
      _$jscoverage['google-event-loader.js'][52]++;
      cacheEndDate = new Date(startDate.getFullYear() + 1, 0, 7);
      _$jscoverage['google-event-loader.js'][53]++;
      this.cache[this.getCacheKey(startDate)] = {remaining: this.calendars.length, entries: [], callbacks: []};
      _$jscoverage['google-event-loader.js'][58]++;
      this.loading.show();
      _$jscoverage['google-event-loader.js'][59]++;
      this.addCallbacks(startDate, endDate, successCallback, failureCallback);
      _$jscoverage['google-event-loader.js'][60]++;
      _a = [];
      _$jscoverage['google-event-loader.js'][60]++;
      (_b = this.calendars.length);
      _$jscoverage['google-event-loader.js'][62]++;
      for (i = 0; i < _b; i += 1) {
        _$jscoverage['google-event-loader.js'][63]++;
        (function () {
  _$jscoverage['google-event-loader.js'][64]++;
  return _a.push(this.loadFromGoogle(cacheStartDate, cacheEndDate, (function (__this) {
  _$jscoverage['google-event-loader.js'][65]++;
  var __func = (function (entries) {
  _$jscoverage['google-event-loader.js'][66]++;
  var cacheInfo;
  _$jscoverage['google-event-loader.js'][67]++;
  cacheInfo = this.cache[this.getCacheKey(startDate)];
  _$jscoverage['google-event-loader.js'][68]++;
  cacheInfo.remaining--;
  _$jscoverage['google-event-loader.js'][69]++;
  cacheInfo.entries = cacheInfo.entries.concat(entries);
  _$jscoverage['google-event-loader.js'][70]++;
  this.fireCallbacks(cacheInfo, true);
  _$jscoverage['google-event-loader.js'][71]++;
  if (cacheInfo.remaining === 0) {
    _$jscoverage['google-event-loader.js'][72]++;
    this.clearCallbacks(cacheInfo);
    _$jscoverage['google-event-loader.js'][73]++;
    return this.loading.hide();
  }
});
  _$jscoverage['google-event-loader.js'][76]++;
  return (function () {
  _$jscoverage['google-event-loader.js'][77]++;
  return __func.apply(__this, arguments);
});
})(this), (function (__this) {
  _$jscoverage['google-event-loader.js'][80]++;
  var __func = (function () {
  _$jscoverage['google-event-loader.js'][81]++;
  var cacheInfo;
  _$jscoverage['google-event-loader.js'][82]++;
  cacheInfo = this.cache[this.getCacheKey(startDate)];
  _$jscoverage['google-event-loader.js'][83]++;
  cacheInfo.remaining--;
  _$jscoverage['google-event-loader.js'][84]++;
  this.fireCallbacks(cacheInfo, false);
  _$jscoverage['google-event-loader.js'][85]++;
  if (cacheInfo.remaining === 0) {
    _$jscoverage['google-event-loader.js'][86]++;
    this.clearCallbacks(cacheInfo);
    _$jscoverage['google-event-loader.js'][87]++;
    return this.loading.hide();
  }
});
  _$jscoverage['google-event-loader.js'][90]++;
  return (function () {
  _$jscoverage['google-event-loader.js'][91]++;
  return __func.apply(__this, arguments);
});
})(this), i));
}).call(this);
}
      _$jscoverage['google-event-loader.js'][96]++;
      return _a;
    }
  }
});
  _$jscoverage['google-event-loader.js'][99]++;
  MKT.GoogleEventLoader.prototype.getCacheKey = (function (startDate) {
  _$jscoverage['google-event-loader.js'][100]++;
  return startDate.getFullYear();
});
  _$jscoverage['google-event-loader.js'][102]++;
  MKT.GoogleEventLoader.prototype.isLoading = (function (startDate, endDate) {
  _$jscoverage['google-event-loader.js'][103]++;
  return ! ! this.cache[this.getCacheKey(startDate)];
});
  _$jscoverage['google-event-loader.js'][105]++;
  MKT.GoogleEventLoader.prototype.datesInCache = (function (startDate, endDate) {
  _$jscoverage['google-event-loader.js'][106]++;
  var cacheInfo;
  _$jscoverage['google-event-loader.js'][107]++;
  cacheInfo = this.cache[this.getCacheKey(startDate)];
  _$jscoverage['google-event-loader.js'][108]++;
  return cacheInfo && cacheInfo.remaining === 0;
});
  _$jscoverage['google-event-loader.js'][110]++;
  MKT.GoogleEventLoader.prototype.addCallbacks = (function (startDate, endDate, successCallback, failureCallback) {
  _$jscoverage['google-event-loader.js'][111]++;
  var cacheInfo;
  _$jscoverage['google-event-loader.js'][112]++;
  cacheInfo = this.cache[this.getCacheKey(startDate)];
  _$jscoverage['google-event-loader.js'][113]++;
  return cacheInfo.callbacks.push({success: successCallback, failure: failureCallback, startDate: startDate, endDate: endDate});
});
  _$jscoverage['google-event-loader.js'][120]++;
  MKT.GoogleEventLoader.prototype.fireCallbacks = (function (cacheInfo, success) {
  _$jscoverage['google-event-loader.js'][121]++;
  var _a, _b, _c, _d, cb, entries;
  _$jscoverage['google-event-loader.js'][122]++;
  _a = [];
  _$jscoverage['google-event-loader.js'][122]++;
  _c = cacheInfo.callbacks;
  _$jscoverage['google-event-loader.js'][123]++;
  for (_b = 0, _d = _c.length; _b < _d; _b++) {
    _$jscoverage['google-event-loader.js'][124]++;
    cb = _c[_b];
    _$jscoverage['google-event-loader.js'][125]++;
    _a.push((function () {
  _$jscoverage['google-event-loader.js'][126]++;
  if (success) {
    _$jscoverage['google-event-loader.js'][127]++;
    entries = this.getCachedEvents(cb.startDate, cb.endDate);
    _$jscoverage['google-event-loader.js'][128]++;
    return cb.success(entries, cb.startDate, cb.endDate);
  }
  else {
    _$jscoverage['google-event-loader.js'][130]++;
    return cb.failure(cb.startDate, cb.endDate);
  }
}).call(this));
}
  _$jscoverage['google-event-loader.js'][134]++;
  return _a;
});
  _$jscoverage['google-event-loader.js'][136]++;
  MKT.GoogleEventLoader.prototype.clearCallbacks = (function (cacheInfo) {
  _$jscoverage['google-event-loader.js'][137]++;
  cacheInfo.callbacks = [];
  _$jscoverage['google-event-loader.js'][138]++;
  return cacheInfo.callbacks;
});
  _$jscoverage['google-event-loader.js'][140]++;
  MKT.GoogleEventLoader.prototype.getCachedEvents = (function (startDate, endDate) {
  _$jscoverage['google-event-loader.js'][141]++;
  var _a, _b, _c, cacheEntries, cacheInfo, entries, entry;
  _$jscoverage['google-event-loader.js'][142]++;
  cacheInfo = this.cache[this.getCacheKey(startDate)];
  _$jscoverage['google-event-loader.js'][143]++;
  cacheEntries = cacheInfo.entries;
  _$jscoverage['google-event-loader.js'][144]++;
  entries = [];
  _$jscoverage['google-event-loader.js'][145]++;
  _b = cacheEntries;
  _$jscoverage['google-event-loader.js'][146]++;
  for (_a = 0, _c = _b.length; _a < _c; _a++) {
    _$jscoverage['google-event-loader.js'][147]++;
    entry = _b[_a];
    _$jscoverage['google-event-loader.js'][148]++;
    entry.end > startDate && entry.start <= endDate? entries.push(entry): null;
}
  _$jscoverage['google-event-loader.js'][150]++;
  return entries;
});
  _$jscoverage['google-event-loader.js'][152]++;
  MKT.GoogleEventLoader.prototype.loadFromGoogle = (function (startDate, endDate, successCallback, failureCallback, calNumber) {
  _$jscoverage['google-event-loader.js'][153]++;
  var eventsCallback, query, startMax, startMin, uri;
  _$jscoverage['google-event-loader.js'][154]++;
  eventsCallback = (function (__this) {
  _$jscoverage['google-event-loader.js'][155]++;
  var __func = (function (result) {
  _$jscoverage['google-event-loader.js'][156]++;
  var _a, _b, _c, entries, entry, event, results;
  _$jscoverage['google-event-loader.js'][157]++;
  entries = result.feed.entry;
  _$jscoverage['google-event-loader.js'][158]++;
  results = [];
  _$jscoverage['google-event-loader.js'][159]++;
  _b = entries;
  _$jscoverage['google-event-loader.js'][160]++;
  for (_a = 0, _c = _b.length; _a < _c; _a++) {
    _$jscoverage['google-event-loader.js'][161]++;
    entry = _b[_a];
    _$jscoverage['google-event-loader.js'][162]++;
    event = this.createEventFromGoogleEvent(entry, calNumber);
    _$jscoverage['google-event-loader.js'][163]++;
    if (event.end > startDate) {
      _$jscoverage['google-event-loader.js'][164]++;
      results.push(event);
    }
}
  _$jscoverage['google-event-loader.js'][167]++;
  return successCallback(results, startDate, endDate);
});
  _$jscoverage['google-event-loader.js'][169]++;
  return (function () {
  _$jscoverage['google-event-loader.js'][170]++;
  return __func.apply(__this, arguments);
});
})(this);
  _$jscoverage['google-event-loader.js'][173]++;
  uri = this.getFeedUriForCalendar(calNumber);
  _$jscoverage['google-event-loader.js'][174]++;
  query = new google.gdata.calendar.CalendarEventQuery(uri);
  _$jscoverage['google-event-loader.js'][175]++;
  startMin = new google.gdata.DateTime(startDate);
  _$jscoverage['google-event-loader.js'][176]++;
  startMax = new google.gdata.DateTime(endDate);
  _$jscoverage['google-event-loader.js'][177]++;
  query.setMinimumStartTime(startMin);
  _$jscoverage['google-event-loader.js'][178]++;
  query.setMaximumStartTime(startMax);
  _$jscoverage['google-event-loader.js'][179]++;
  query.setSingleEvents(true);
  _$jscoverage['google-event-loader.js'][180]++;
  query.setMaxResults(500);
  _$jscoverage['google-event-loader.js'][181]++;
  query.setOrderBy("starttime");
  _$jscoverage['google-event-loader.js'][182]++;
  query.setSortOrder("a");
  _$jscoverage['google-event-loader.js'][183]++;
  return this.service.getEventsFeed(query, eventsCallback, failureCallback);
});
  _$jscoverage['google-event-loader.js'][185]++;
  MKT.GoogleEventLoader.prototype.createEventFromGoogleEvent = (function (entry, calNumber) {
  _$jscoverage['google-event-loader.js'][186]++;
  var editable, endDate, endTime, entryEndDate, entryStartDate, length, startTime, summary, times;
  _$jscoverage['google-event-loader.js'][187]++;
  times = entry.getTimes();
  _$jscoverage['google-event-loader.js'][188]++;
  if (times.length > 0) {
    _$jscoverage['google-event-loader.js'][189]++;
    startTime = times[0].getStartTime().getDate();
    _$jscoverage['google-event-loader.js'][190]++;
    entryStartDate = new Date(startTime.getFullYear(), startTime.getMonth(), startTime.getDate());
    _$jscoverage['google-event-loader.js'][191]++;
    endTime = times[0].getEndTime().getDate();
    _$jscoverage['google-event-loader.js'][192]++;
    endDate = new Date(endTime.getFullYear(), endTime.getMonth(), endTime.getDate());
    _$jscoverage['google-event-loader.js'][193]++;
    length = Math.round((endDate - entryStartDate) / (86400000));
    _$jscoverage['google-event-loader.js'][194]++;
    (endTime - endDate) > 0? length += 1: null;
    _$jscoverage['google-event-loader.js'][195]++;
    entryEndDate = entryStartDate.addDays(length);
  }
  _$jscoverage['google-event-loader.js'][197]++;
  summary = $.trim(entry.getTitle().getText());
  _$jscoverage['google-event-loader.js'][198]++;
  editable = this.calendars[calNumber].editable;
  _$jscoverage['google-event-loader.js'][199]++;
  return this.createEventObject(summary, calNumber, entryStartDate, entryEndDate, length, editable, entry);
});
  _$jscoverage['google-event-loader.js'][201]++;
  MKT.GoogleEventLoader.prototype.createEventObject = (function (summary, calNumber, start, end, length, editable, googleEvent, isNew) {
  _$jscoverage['google-event-loader.js'][202]++;
  var event;
  _$jscoverage['google-event-loader.js'][203]++;
  event = {summary: summary, calNumber: calNumber, start: start, end: end, length: length, editable: editable, googleEvent: googleEvent, isNew: isNew};
  _$jscoverage['google-event-loader.js'][213]++;
  event.save = (function (__this) {
  _$jscoverage['google-event-loader.js'][214]++;
  var __func = (function (success, failure, startCalNumber) {
  _$jscoverage['google-event-loader.js'][215]++;
  var endTime, event_when, startTime;
  _$jscoverage['google-event-loader.js'][216]++;
  if (event.googleEvent) {
    _$jscoverage['google-event-loader.js'][217]++;
    event.googleEvent.getTitle().setText(event.summary);
    _$jscoverage['google-event-loader.js'][218]++;
    startTime = new google.gdata.DateTime(event.start, true);
    _$jscoverage['google-event-loader.js'][219]++;
    endTime = new google.gdata.DateTime(event.end, true);
    _$jscoverage['google-event-loader.js'][220]++;
    event_when = new google.gdata.When();
    _$jscoverage['google-event-loader.js'][221]++;
    event_when.setStartTime(startTime);
    _$jscoverage['google-event-loader.js'][222]++;
    event_when.setEndTime(endTime);
    _$jscoverage['google-event-loader.js'][223]++;
    event.googleEvent.setTimes([event_when]);
    _$jscoverage['google-event-loader.js'][224]++;
    if ((typeof startCalNumber !== "undefined" && startCalNumber !== null) && event.calNumber !== startCalNumber) {
      _$jscoverage['google-event-loader.js'][225]++;
      return this.moveToNewCalendar(event, startCalNumber, success, failure);
    }
    else {
      _$jscoverage['google-event-loader.js'][227]++;
      return this.saveChanges(event, success, failure);
    }
  }
  else {
    _$jscoverage['google-event-loader.js'][230]++;
    event.isNew = false;
    _$jscoverage['google-event-loader.js'][231]++;
    return this.createEvent(event, success, failure);
  }
});
  _$jscoverage['google-event-loader.js'][234]++;
  return (function () {
  _$jscoverage['google-event-loader.js'][235]++;
  return __func.apply(__this, arguments);
});
})(this);
  _$jscoverage['google-event-loader.js'][238]++;
  event.remove = (function (__this) {
  _$jscoverage['google-event-loader.js'][239]++;
  var __func = (function (success, failure) {
  _$jscoverage['google-event-loader.js'][240]++;
  if (! event.googleEvent) {
    _$jscoverage['google-event-loader.js'][241]++;
    return success();
  }
  _$jscoverage['google-event-loader.js'][243]++;
  return event.googleEvent.deleteEntry((function (__this) {
  _$jscoverage['google-event-loader.js'][244]++;
  var __func = (function () {
  _$jscoverage['google-event-loader.js'][245]++;
  this.removeEvent(event);
  _$jscoverage['google-event-loader.js'][246]++;
  return success();
});
  _$jscoverage['google-event-loader.js'][248]++;
  return (function () {
  _$jscoverage['google-event-loader.js'][249]++;
  return __func.apply(__this, arguments);
});
})(this), (function (__this) {
  _$jscoverage['google-event-loader.js'][252]++;
  var __func = (function () {
  _$jscoverage['google-event-loader.js'][253]++;
  return failure();
});
  _$jscoverage['google-event-loader.js'][255]++;
  return (function () {
  _$jscoverage['google-event-loader.js'][256]++;
  return __func.apply(__this, arguments);
});
})(this));
});
  _$jscoverage['google-event-loader.js'][260]++;
  return (function () {
  _$jscoverage['google-event-loader.js'][261]++;
  return __func.apply(__this, arguments);
});
})(this);
  _$jscoverage['google-event-loader.js'][264]++;
  return event;
});
  _$jscoverage['google-event-loader.js'][266]++;
  MKT.GoogleEventLoader.prototype.addEvent = (function (event) {
  _$jscoverage['google-event-loader.js'][267]++;
  var cacheInfo, startDate;
  _$jscoverage['google-event-loader.js'][268]++;
  startDate = event.start;
  _$jscoverage['google-event-loader.js'][269]++;
  cacheInfo = this.cache[this.getCacheKey(startDate)];
  _$jscoverage['google-event-loader.js'][270]++;
  cacheInfo.entries.push(event);
  _$jscoverage['google-event-loader.js'][271]++;
  return this.addEventHook(event);
});
  _$jscoverage['google-event-loader.js'][273]++;
  MKT.GoogleEventLoader.prototype.createEvent = (function (event, successCallback, failureCallback) {
  _$jscoverage['google-event-loader.js'][274]++;
  var entry, feedUri;
  _$jscoverage['google-event-loader.js'][275]++;
  entry = new google.gdata.calendar.CalendarEventEntry({title: {type: "text", text: event.summary}, times: [{startTime: new google.gdata.DateTime(event.start, true), endTime: new google.gdata.DateTime(event.end, true)}]});
  _$jscoverage['google-event-loader.js'][287]++;
  feedUri = this.getFeedUriForCalendar(event.calNumber);
  _$jscoverage['google-event-loader.js'][288]++;
  return this.service.insertEntry(feedUri, entry, (function (__this) {
  _$jscoverage['google-event-loader.js'][289]++;
  var __func = (function (response) {
  _$jscoverage['google-event-loader.js'][290]++;
  event.googleEvent = response.entry;
  _$jscoverage['google-event-loader.js'][291]++;
  return successCallback();
});
  _$jscoverage['google-event-loader.js'][293]++;
  return (function () {
  _$jscoverage['google-event-loader.js'][294]++;
  return __func.apply(__this, arguments);
});
})(this), (function (__this) {
  _$jscoverage['google-event-loader.js'][297]++;
  var __func = (function () {
  _$jscoverage['google-event-loader.js'][298]++;
  return failureCallback();
});
  _$jscoverage['google-event-loader.js'][300]++;
  return (function () {
  _$jscoverage['google-event-loader.js'][301]++;
  return __func.apply(__this, arguments);
});
})(this), google.gdata.calendar.CalendarEventEntry);
});
  _$jscoverage['google-event-loader.js'][305]++;
  MKT.GoogleEventLoader.prototype.saveChanges = (function (event, success, failure) {
  _$jscoverage['google-event-loader.js'][306]++;
  return event.googleEvent.updateEntry((function (__this) {
  _$jscoverage['google-event-loader.js'][307]++;
  var __func = (function (response) {
  _$jscoverage['google-event-loader.js'][308]++;
  event.googleEvent = response.entry;
  _$jscoverage['google-event-loader.js'][309]++;
  event.googleEvent.getSequence().setValue(event.googleEvent.getSequence().getValue() + 1);
  _$jscoverage['google-event-loader.js'][310]++;
  return success(response);
});
  _$jscoverage['google-event-loader.js'][312]++;
  return (function () {
  _$jscoverage['google-event-loader.js'][313]++;
  return __func.apply(__this, arguments);
});
})(this), (function (__this) {
  _$jscoverage['google-event-loader.js'][316]++;
  var __func = (function (response) {
  _$jscoverage['google-event-loader.js'][317]++;
  return failure(response);
});
  _$jscoverage['google-event-loader.js'][319]++;
  return (function () {
  _$jscoverage['google-event-loader.js'][320]++;
  return __func.apply(__this, arguments);
});
})(this));
});
  _$jscoverage['google-event-loader.js'][324]++;
  MKT.GoogleEventLoader.prototype.moveToNewCalendar = (function (event, oldCalNumber, success, failure) {
  _$jscoverage['google-event-loader.js'][325]++;
  var feedUri;
  _$jscoverage['google-event-loader.js'][326]++;
  event.googleEvent.getSequence().setValue(event.googleEvent.getSequence().getValue() + 1);
  _$jscoverage['google-event-loader.js'][327]++;
  feedUri = this.getFeedUriForCalendar(event.calNumber);
  _$jscoverage['google-event-loader.js'][328]++;
  return this.service.insertEntry(feedUri, event.googleEvent, (function (__this) {
  _$jscoverage['google-event-loader.js'][329]++;
  var __func = (function (response) {
  _$jscoverage['google-event-loader.js'][330]++;
  var newGoogleEvent;
  _$jscoverage['google-event-loader.js'][331]++;
  newGoogleEvent = response.entry;
  _$jscoverage['google-event-loader.js'][332]++;
  event.googleEvent = newGoogleEvent;
  _$jscoverage['google-event-loader.js'][333]++;
  event.googleEvent.getSequence().setValue(event.googleEvent.getSequence().getValue() + 1);
  _$jscoverage['google-event-loader.js'][334]++;
  return event.googleEvent.deleteEntry((function (__this) {
  _$jscoverage['google-event-loader.js'][335]++;
  var __func = (function (response) {
  _$jscoverage['google-event-loader.js'][336]++;
  return success(response);
});
  _$jscoverage['google-event-loader.js'][338]++;
  return (function () {
  _$jscoverage['google-event-loader.js'][339]++;
  return __func.apply(__this, arguments);
});
})(this), (function (__this) {
  _$jscoverage['google-event-loader.js'][342]++;
  var __func = (function (response) {
  _$jscoverage['google-event-loader.js'][343]++;
  return failure(response);
});
  _$jscoverage['google-event-loader.js'][345]++;
  return (function () {
  _$jscoverage['google-event-loader.js'][346]++;
  return __func.apply(__this, arguments);
});
})(this));
});
  _$jscoverage['google-event-loader.js'][350]++;
  return (function () {
  _$jscoverage['google-event-loader.js'][351]++;
  return __func.apply(__this, arguments);
});
})(this), (function (__this) {
  _$jscoverage['google-event-loader.js'][354]++;
  var __func = (function (response) {
  _$jscoverage['google-event-loader.js'][355]++;
  return failure(response);
});
  _$jscoverage['google-event-loader.js'][357]++;
  return (function () {
  _$jscoverage['google-event-loader.js'][358]++;
  return __func.apply(__this, arguments);
});
})(this), google.gdata.calendar.CalendarEventEntry);
});
  _$jscoverage['google-event-loader.js'][362]++;
  MKT.GoogleEventLoader.prototype.updateEvent = (function (event, oldStart, oldEnd) {
  _$jscoverage['google-event-loader.js'][363]++;
  return this.updateEventHook(event, oldStart, oldEnd);
});
  _$jscoverage['google-event-loader.js'][365]++;
  MKT.GoogleEventLoader.prototype.removeEvent = (function (event) {
  _$jscoverage['google-event-loader.js'][366]++;
  var _a, cacheEntries, cacheInfo, entry, i, startDate;
  _$jscoverage['google-event-loader.js'][367]++;
  startDate = event.start;
  _$jscoverage['google-event-loader.js'][368]++;
  cacheInfo = this.cache[this.getCacheKey(startDate)];
  _$jscoverage['google-event-loader.js'][369]++;
  cacheEntries = cacheInfo.entries;
  _$jscoverage['google-event-loader.js'][370]++;
  (_a = cacheEntries.length);
  _$jscoverage['google-event-loader.js'][372]++;
  for (i = 0; i < _a; i += 1) {
    _$jscoverage['google-event-loader.js'][373]++;
    entry = cacheEntries[i];
    _$jscoverage['google-event-loader.js'][374]++;
    if (this.eventsAreEqual(event, entry)) {
      _$jscoverage['google-event-loader.js'][375]++;
      Array.remove(cacheEntries, i);
      _$jscoverage['google-event-loader.js'][376]++;
      this.removeEventHook(event);
      _$jscoverage['google-event-loader.js'][377]++;
      return null;
    }
}
  _$jscoverage['google-event-loader.js'][380]++;
  return null;
});
  _$jscoverage['google-event-loader.js'][382]++;
  MKT.GoogleEventLoader.prototype.eventsAreEqual = (function (a, b) {
  _$jscoverage['google-event-loader.js'][383]++;
  return a.summary === b.summary && a.start === b.start && a.end === b.end;
});
})();
_$jscoverage['google-event-loader.js'].source = ["(function(){","  MKT.GoogleEventLoader = function(service, loading) {","    this.service = service;","    this.loading = loading;","    this.cache = {};","    this.addEventHook = function() {    };","    this.updateEventHook = function() {    };","    this.removeEventHook = function() {    };","    return this;","  };","  MKT.GoogleEventLoader.prototype.init = function(successCallback, failureCallback) {","    this.loading.show();","    return this.service.getAllCalendarsFeed('http://www.google.com/calendar/feeds/default/allcalendars/full', (function(__this) {","      var __func = function(result) {","        var _a, _b, _c, accessValue, calendar;","        this.loading.hide();","        this.calendars = result.feed.entry;","        _b = this.calendars;","        for (_a = 0, _c = _b.length; _a &lt; _c; _a++) {","          calendar = _b[_a];","          accessValue = calendar.getAccessLevel().getValue();","          calendar.editable = accessValue === google.gdata.calendar.AccessLevelProperty.VALUE_OWNER || accessValue === google.gdata.calendar.AccessLevelProperty.VALUE_EDITOR;","        }","        return successCallback();","      };","      return (function() {","        return __func.apply(__this, arguments);","      });","    })(this), (function(__this) {","      var __func = function() {","        this.loading.hide();","        return failureCallback();","      };","      return (function() {","        return __func.apply(__this, arguments);","      });","    })(this));","  };","  MKT.GoogleEventLoader.prototype.getFeedUriForCalendar = function(calNumber) {","    var calendar;","    calendar = this.calendars[calNumber];","    return calendar.getLink().href;","  };","  MKT.GoogleEventLoader.prototype.load = function(startDate, endDate, successCallback, failureCallback) {","    var _a, _b, cacheEndDate, cacheStartDate;","    if (this.datesInCache(startDate, endDate)) {","      return successCallback(this.getCachedEvents(startDate, endDate), startDate, endDate);","    } else if (this.isLoading(startDate, endDate)) {","      return this.addCallbacks(startDate, endDate, successCallback, failureCallback);","    } else {","      cacheStartDate = new Date(startDate.getFullYear(), 0, 1);","      cacheEndDate = new Date(startDate.getFullYear() + 1, 0, 7);","      this.cache[this.getCacheKey(startDate)] = {","        remaining: this.calendars.length,","        entries: [],","        callbacks: []","      };","      this.loading.show();","      this.addCallbacks(startDate, endDate, successCallback, failureCallback);","      _a = []; (_b = this.calendars.length);","","      for (i = 0; i &lt; _b; i += 1) {","        (function() {","          return _a.push(this.loadFromGoogle(cacheStartDate, cacheEndDate, (function(__this) {","            var __func = function(entries) {","              var cacheInfo;","              cacheInfo = this.cache[this.getCacheKey(startDate)];","              cacheInfo.remaining--;","              cacheInfo.entries = cacheInfo.entries.concat(entries);","              this.fireCallbacks(cacheInfo, true);","              if (cacheInfo.remaining === 0) {","                this.clearCallbacks(cacheInfo);","                return this.loading.hide();","              }","            };","            return (function() {","              return __func.apply(__this, arguments);","            });","          })(this), (function(__this) {","            var __func = function() {","              var cacheInfo;","              cacheInfo = this.cache[this.getCacheKey(startDate)];","              cacheInfo.remaining--;","              this.fireCallbacks(cacheInfo, false);","              if (cacheInfo.remaining === 0) {","                this.clearCallbacks(cacheInfo);","                return this.loading.hide();","              }","            };","            return (function() {","              return __func.apply(__this, arguments);","            });","          })(this), i));","        }).call(this);","      }","      return _a;","    }","  };","  MKT.GoogleEventLoader.prototype.getCacheKey = function(startDate) {","    return startDate.getFullYear();","  };","  MKT.GoogleEventLoader.prototype.isLoading = function(startDate, endDate) {","    return !!this.cache[this.getCacheKey(startDate)];","  };","  MKT.GoogleEventLoader.prototype.datesInCache = function(startDate, endDate) {","    var cacheInfo;","    cacheInfo = this.cache[this.getCacheKey(startDate)];","    return cacheInfo &amp;&amp; cacheInfo.remaining === 0;","  };","  MKT.GoogleEventLoader.prototype.addCallbacks = function(startDate, endDate, successCallback, failureCallback) {","    var cacheInfo;","    cacheInfo = this.cache[this.getCacheKey(startDate)];","    return cacheInfo.callbacks.push({","      success: successCallback,","      failure: failureCallback,","      startDate: startDate,","      endDate: endDate","    });","  };","  MKT.GoogleEventLoader.prototype.fireCallbacks = function(cacheInfo, success) {","    var _a, _b, _c, _d, cb, entries;","    _a = []; _c = cacheInfo.callbacks;","    for (_b = 0, _d = _c.length; _b &lt; _d; _b++) {","      cb = _c[_b];","      _a.push((function() {","        if (success) {","          entries = this.getCachedEvents(cb.startDate, cb.endDate);","          return cb.success(entries, cb.startDate, cb.endDate);","        } else {","          return cb.failure(cb.startDate, cb.endDate);","        }","      }).call(this));","    }","    return _a;","  };","  MKT.GoogleEventLoader.prototype.clearCallbacks = function(cacheInfo) {","    cacheInfo.callbacks = [];","    return cacheInfo.callbacks;","  };","  MKT.GoogleEventLoader.prototype.getCachedEvents = function(startDate, endDate) {","    var _a, _b, _c, cacheEntries, cacheInfo, entries, entry;","    cacheInfo = this.cache[this.getCacheKey(startDate)];","    cacheEntries = cacheInfo.entries;","    entries = [];","    _b = cacheEntries;","    for (_a = 0, _c = _b.length; _a &lt; _c; _a++) {","      entry = _b[_a];","      entry.end &gt; startDate &amp;&amp; entry.start &lt;= endDate ? entries.push(entry) : null;","    }","    return entries;","  };","  MKT.GoogleEventLoader.prototype.loadFromGoogle = function(startDate, endDate, successCallback, failureCallback, calNumber) {","    var eventsCallback, query, startMax, startMin, uri;","    eventsCallback = (function(__this) {","      var __func = function(result) {","        var _a, _b, _c, entries, entry, event, results;","        entries = result.feed.entry;","        results = [];","        _b = entries;","        for (_a = 0, _c = _b.length; _a &lt; _c; _a++) {","          entry = _b[_a];","          event = this.createEventFromGoogleEvent(entry, calNumber);","          if (event.end &gt; startDate) {","            results.push(event);","          }","        }","        return successCallback(results, startDate, endDate);","      };","      return (function() {","        return __func.apply(__this, arguments);","      });","    })(this);","    uri = this.getFeedUriForCalendar(calNumber);","    query = new google.gdata.calendar.CalendarEventQuery(uri);","    startMin = new google.gdata.DateTime(startDate);","    startMax = new google.gdata.DateTime(endDate);","    query.setMinimumStartTime(startMin);","    query.setMaximumStartTime(startMax);","    query.setSingleEvents(true);","    query.setMaxResults(500);","    query.setOrderBy('starttime');","    query.setSortOrder('a');","    return this.service.getEventsFeed(query, eventsCallback, failureCallback);","  };","  MKT.GoogleEventLoader.prototype.createEventFromGoogleEvent = function(entry, calNumber) {","    var editable, endDate, endTime, entryEndDate, entryStartDate, length, startTime, summary, times;","    times = entry.getTimes();","    if (times.length &gt; 0) {","      startTime = times[0].getStartTime().getDate();","      entryStartDate = new Date(startTime.getFullYear(), startTime.getMonth(), startTime.getDate());","      endTime = times[0].getEndTime().getDate();","      endDate = new Date(endTime.getFullYear(), endTime.getMonth(), endTime.getDate());","      length = Math.round((endDate - entryStartDate) / (1000 * 60 * 60 * 24));","      (endTime - endDate) &gt; 0 ? length += 1 : null;","      entryEndDate = entryStartDate.addDays(length);","    }","    summary = $.trim(entry.getTitle().getText());","    editable = this.calendars[calNumber].editable;","    return this.createEventObject(summary, calNumber, entryStartDate, entryEndDate, length, editable, entry);","  };","  MKT.GoogleEventLoader.prototype.createEventObject = function(summary, calNumber, start, end, length, editable, googleEvent, isNew) {","    var event;","    event = {","      summary: summary,","      calNumber: calNumber,","      start: start,","      end: end,","      length: length,","      editable: editable,","      googleEvent: googleEvent,","      isNew: isNew","    };","    event.save = (function(__this) {","      var __func = function(success, failure, startCalNumber) {","        var endTime, event_when, startTime;","        if (event.googleEvent) {","          event.googleEvent.getTitle().setText(event.summary);","          startTime = new google.gdata.DateTime(event.start, true);","          endTime = new google.gdata.DateTime(event.end, true);","          event_when = new google.gdata.When();","          event_when.setStartTime(startTime);","          event_when.setEndTime(endTime);","          event.googleEvent.setTimes([event_when]);","          if ((typeof startCalNumber !== \"undefined\" &amp;&amp; startCalNumber !== null) &amp;&amp; event.calNumber !== startCalNumber) {","            return this.moveToNewCalendar(event, startCalNumber, success, failure);","          } else {","            return this.saveChanges(event, success, failure);","          }","        } else {","          event.isNew = false;","          return this.createEvent(event, success, failure);","        }","      };","      return (function() {","        return __func.apply(__this, arguments);","      });","    })(this);","    event.remove = (function(__this) {","      var __func = function(success, failure) {","        if (!(event.googleEvent)) {","          return success();","        }","        return event.googleEvent.deleteEntry((function(__this) {","          var __func = function() {","            this.removeEvent(event);","            return success();","          };","          return (function() {","            return __func.apply(__this, arguments);","          });","        })(this), (function(__this) {","          var __func = function() {","            return failure();","          };","          return (function() {","            return __func.apply(__this, arguments);","          });","        })(this));","      };","      return (function() {","        return __func.apply(__this, arguments);","      });","    })(this);","    return event;","  };","  MKT.GoogleEventLoader.prototype.addEvent = function(event) {","    var cacheInfo, startDate;","    startDate = event.start;","    cacheInfo = this.cache[this.getCacheKey(startDate)];","    cacheInfo.entries.push(event);","    return this.addEventHook(event);","  };","  MKT.GoogleEventLoader.prototype.createEvent = function(event, successCallback, failureCallback) {","    var entry, feedUri;","    entry = new google.gdata.calendar.CalendarEventEntry({","      title: {","        type: 'text',","        text: event.summary","      },","      times: [","        {","          startTime: new google.gdata.DateTime(event.start, true),","          endTime: new google.gdata.DateTime(event.end, true)","        }","      ]","    });","    feedUri = this.getFeedUriForCalendar(event.calNumber);","    return this.service.insertEntry(feedUri, entry, (function(__this) {","      var __func = function(response) {","        event.googleEvent = response.entry;","        return successCallback();","      };","      return (function() {","        return __func.apply(__this, arguments);","      });","    })(this), (function(__this) {","      var __func = function() {","        return failureCallback();","      };","      return (function() {","        return __func.apply(__this, arguments);","      });","    })(this), google.gdata.calendar.CalendarEventEntry);","  };","  MKT.GoogleEventLoader.prototype.saveChanges = function(event, success, failure) {","    return event.googleEvent.updateEntry((function(__this) {","      var __func = function(response) {","        event.googleEvent = response.entry;","        event.googleEvent.getSequence().setValue(event.googleEvent.getSequence().getValue() + 1);","        return success(response);","      };","      return (function() {","        return __func.apply(__this, arguments);","      });","    })(this), (function(__this) {","      var __func = function(response) {","        return failure(response);","      };","      return (function() {","        return __func.apply(__this, arguments);","      });","    })(this));","  };","  MKT.GoogleEventLoader.prototype.moveToNewCalendar = function(event, oldCalNumber, success, failure) {","    var feedUri;","    event.googleEvent.getSequence().setValue(event.googleEvent.getSequence().getValue() + 1);","    feedUri = this.getFeedUriForCalendar(event.calNumber);","    return this.service.insertEntry(feedUri, event.googleEvent, (function(__this) {","      var __func = function(response) {","        var newGoogleEvent;","        newGoogleEvent = response.entry;","        event.googleEvent = newGoogleEvent;","        event.googleEvent.getSequence().setValue(event.googleEvent.getSequence().getValue() + 1);","        return event.googleEvent.deleteEntry((function(__this) {","          var __func = function(response) {","            return success(response);","          };","          return (function() {","            return __func.apply(__this, arguments);","          });","        })(this), (function(__this) {","          var __func = function(response) {","            return failure(response);","          };","          return (function() {","            return __func.apply(__this, arguments);","          });","        })(this));","      };","      return (function() {","        return __func.apply(__this, arguments);","      });","    })(this), (function(__this) {","      var __func = function(response) {","        return failure(response);","      };","      return (function() {","        return __func.apply(__this, arguments);","      });","    })(this), google.gdata.calendar.CalendarEventEntry);","  };","  MKT.GoogleEventLoader.prototype.updateEvent = function(event, oldStart, oldEnd) {","    return this.updateEventHook(event, oldStart, oldEnd);","  };","  MKT.GoogleEventLoader.prototype.removeEvent = function(event) {","    var _a, cacheEntries, cacheInfo, entry, i, startDate;","    startDate = event.start;","    cacheInfo = this.cache[this.getCacheKey(startDate)];","    cacheEntries = cacheInfo.entries;","    (_a = cacheEntries.length);","","    for (i = 0; i &lt; _a; i += 1) {","      entry = cacheEntries[i];","      if (this.eventsAreEqual(event, entry)) {","        Array.remove(cacheEntries, i);","        this.removeEventHook(event);","        return null;","      }","    }","    return null;","  };","  MKT.GoogleEventLoader.prototype.eventsAreEqual = function(a, b) {","    return a.summary === b.summary &amp;&amp; a.start === b.start &amp;&amp; a.end === b.end;","  };","","})();"];
